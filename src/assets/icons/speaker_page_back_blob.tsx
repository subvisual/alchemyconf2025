"use client";

import { SVGProps, useState, useEffect } from "react";
import { useSpring, animated, useSpringRef } from "@react-spring/web";

interface SpeakerBlobProps extends SVGProps<SVGSVGElement> {
  className?: string;
  position?: string;
}

const SpeakerPageBackBlob = ({
  className,
  position,
  ...props
}: SpeakerBlobProps) => {
  const [startAnimation, setStartAnimation] = useState(false);

  const pathL1 =
    "M463.251 516.843C417.36 565.151 351.295 594.17 295.402 600.247C252.868 604.871 182.338 583.397 139.719 538.199C94.5786 490.327 87.8919 445.707 96.1947 371.666C110.887 240.646 -48.562 198.384 15.1147 71.4116C37.6461 26.4837 124.479 -26.779 178.797 15.6365C226.388 52.7989 200.55 159.487 287.404 195.873C366.698 229.091 454.911 254.719 489.75 333.631C523.031 409.01 502.691 475.326 463.251 516.843Z";
  const pathL2 =
    "M484.5 561.5C524 653.008 336.456 630.851 206.456 556.346C90.5352 489.91 193.516 432.618 110.454 393.834C66.8203 373.461 -25.6509 323.432 6.9547 278.837C51.5011 217.909 126.561 267.238 182.452 234.258C234.604 203.485 96.3612 80.8736 202.498 17.4994C323.69 -54.8648 378.855 117.051 393.453 184.829C415.48 287.095 537.788 284.023 560.421 359.432C588.454 452.835 450.207 482.055 484.5 561.5Z";
  const pathL3 =
    "M530.715 351.903C462.708 412.3 381.11 278.782 313.347 320.126C279.065 341.042 320.652 461.581 206.974 448.552C147.257 441.707 82.4557 375.176 100 308C131.046 189.126 -72.216 157.779 28.9383 46.6302C90.5904 -21.1135 130.504 89.0508 193.813 88.4254C269.452 87.6782 257.142 36.1253 340.294 8.13518C456.221 -30.8874 546.126 79.1074 567.153 154.766C587.239 227.038 571.03 316.098 530.715 351.903Z";
  const pathL4 =
    "M323.45 499.374C277.785 537.853 210.158 554.927 136.144 534.333C77.3289 517.969 18.8289 499.374 5.32885 424.969C-8.03211 351.329 5.32885 299.107 64.3788 257.211C178.924 175.941 246.687 222.168 267.175 96.562C274.425 52.1175 312.963 -8.65077 374 1.14441C438.306 11.4643 498.144 43.6626 515.249 126.305C538.664 239.429 392.286 268.09 365.711 340.661C333.3 429.171 367.682 462.103 323.45 499.374Z";

  const pathR1 =
    "M44.2021 84.8412C90.0925 36.5335 156.158 7.51418 212.051 1.43769C254.585 -3.18636 325.115 18.2876 367.734 63.4859C412.874 111.358 419.561 155.978 411.258 230.018C396.566 361.039 556.015 403.301 492.338 530.273C469.807 575.201 382.974 628.464 328.656 586.048C281.065 548.886 306.903 442.198 220.049 405.812C140.755 372.593 52.5423 346.965 17.7026 268.054C-15.5776 192.674 4.76207 126.359 44.2021 84.8412Z";
  const pathR2 =
    "M79.9529 60.9063C40.4525 -30.6018 227.997 -8.44519 357.997 66.06C473.918 132.496 370.937 189.788 453.998 228.572C497.633 248.946 590.104 298.974 557.498 343.57C512.952 404.497 437.892 355.169 382.001 388.148C329.849 418.921 468.092 541.533 361.955 604.907C240.763 677.271 185.598 505.355 171 437.578C148.973 335.311 26.6646 338.384 4.03158 262.974C-24.0016 169.572 114.246 140.351 79.9529 60.9063Z";
  const pathR3 =
    "M45.7382 97.9852C113.745 37.588 195.343 171.105 263.106 129.762C297.387 108.845 255.801 -11.6938 369.479 1.3359C429.196 8.18067 493.997 74.7112 476.453 141.888C445.407 260.761 648.669 292.108 547.515 403.257C485.862 471.001 445.949 360.837 382.64 361.462C307.001 362.209 319.311 413.762 236.158 441.753C120.231 480.775 30.3266 370.78 9.2997 295.121C-10.7859 222.849 5.42298 133.789 45.7382 97.9852Z";
  const pathR4 =
    "M194.379 59.2759C240.044 20.7971 307.815 -14.443 381.829 6.15039C440.644 22.515 499 59.2759 512.5 133.682C525.861 207.321 512.5 259.543 453.45 301.439C338.905 382.709 271.142 336.482 250.654 462.088C243.404 506.533 204.865 567.301 143.829 557.506C79.5226 547.186 19.685 514.988 2.57936 432.345C-20.8356 319.221 125.543 290.56 152.117 217.989C184.529 129.479 150.147 96.547 194.379 59.2759Z";

  const { x } = useSpring({
    to: startAnimation
      ? [
          {
            x: 1,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 2, config: { duration: 8000 } },
          {
            x: 3,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 2, config: { duration: 8000 } },
          {
            x: 1,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 0, config: { duration: 8000 } },
        ]
      : { x: 0 },
    from: { x: 0 },
    loop: startAnimation,
  });

  useEffect(() => {
    setStartAnimation(true);
  }, []);

  return (
    <div className={`${className} absolute`}>
      <svg
        width="700"
        height="700"
        viewBox="0 0 700 700"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style={{
          transform:
            Number(position) % 2 === 1
              ? "translateX(-150px) translateY(-60px)"
              : "translateX(-100px) translateY(-60px)",
        }}
        {...props}
      >
        <animated.path
          fillRule="evenodd"
          clipRule="evenodd"
          opacity="0.24"
          fill="#F4AC45"
          d={x.to({
            range: [0, 1, 2, 3],
            output:
              Number(position) % 2 === 1
                ? [pathL1, pathL2, pathL3, pathL4]
                : [pathR1, pathR2, pathR3, pathR4],
          })}
        />
      </svg>
    </div>
  );
};

export default SpeakerPageBackBlob;
