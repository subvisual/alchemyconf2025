"use client";

import { SVGProps, useState, useEffect } from "react";
import { useSpring, animated, useSpringRef } from "@react-spring/web";

interface SpeakerBlobProps extends SVGProps<SVGSVGElement> {
  className?: string;
  position?: string;
}

const SpeakerPageBackBlobMob = ({
  className,
  position,
  ...props
}: SpeakerBlobProps) => {
  const [startAnimation, setStartAnimation] = useState(false);

  // Larger version of the blobs (wip)
  // const pathL1 =
  //   "M296.597 331.47C267.227 362.387 224.945 380.959 189.173 384.848C161.952 387.808 116.812 374.064 89.5362 345.137C60.6465 314.499 56.367 285.943 61.6808 238.557C71.084 154.703 -30.9635 127.656 9.78962 46.3936C24.2097 17.6397 79.783 -16.4484 114.546 10.6976C145.005 34.4815 128.468 102.762 184.055 126.049C234.803 147.309 291.259 163.71 313.556 214.214C334.856 262.457 321.838 304.899 296.597 331.47Z";
  // const pathL2 =
  //   "M310.452 360.406C335.756 419.026 215.616 404.833 132.338 357.105C58.0798 314.546 124.049 277.845 70.84 253C42.8882 239.949 -16.3486 207.901 4.53844 179.333C33.0747 140.303 81.1578 171.903 116.962 150.776C150.37 131.063 61.8119 52.5186 129.803 11.9213C207.438 -34.435 242.776 75.6941 252.128 119.112C266.238 184.624 344.589 182.655 359.087 230.962C377.045 290.796 288.484 309.514 310.452 360.406Z";
  // const pathL3 =
  //   "M339.597 225.296C296.063 263.959 243.828 178.488 200.451 204.954C178.505 218.344 205.127 295.506 132.356 287.166C94.1284 282.784 52.6464 240.195 63.8773 197.192C83.7513 121.095 -46.366 101.029 18.3874 29.8773C57.8538 -13.4885 83.4042 57.0327 123.931 56.6323C172.351 56.154 164.471 23.1527 217.701 5.23491C291.911 -19.7452 349.463 50.6675 362.923 99.1001C375.781 145.365 365.405 202.376 339.597 225.296Z";
  // const pathL4 =
  //   "M206.186 318.939C177.056 343.485 133.825 365.965 86.6113 352.828C49.0927 342.389 11.8675 318.939 3.25579 271.475C-5.26721 224.501 3.25579 191.188 40.924 164.462C113.993 112.62 157.219 142.108 170.288 61.9836C174.913 33.6323 199.497 -5.13196 238.432 1.11642C279.453 7.69952 317.624 28.2389 328.536 80.9568C343.472 153.119 250.097 171.402 233.145 217.695C212.47 274.156 234.402 295.164 206.186 318.939Z";

  // const pathR1 =
  //   "M28.1731 53.7918C57.5429 22.8749 99.8248 4.30251 135.597 0.413561C162.818 -2.54583 207.957 11.1975 235.234 40.1244C264.123 70.7624 268.403 99.3191 263.089 146.705C253.686 230.558 355.733 257.606 314.98 338.868C300.56 367.622 244.987 401.71 210.223 374.564C179.765 350.78 196.302 282.5 140.715 259.213C89.9671 237.953 33.5108 221.551 11.2134 171.048C-10.0859 122.805 2.93146 80.3631 28.1731 53.7918Z";
  // const pathR2 =
  //   "M51.5348 38.9013C26.231 -19.7184 146.372 -5.52499 229.649 42.2028C303.907 84.7614 237.938 121.463 291.147 146.307C319.099 159.359 378.336 191.407 357.449 219.974C328.912 259.004 280.829 227.405 245.026 248.532C211.617 268.245 300.175 346.789 232.185 387.386C154.549 433.743 119.211 323.614 109.859 280.196C95.749 214.684 17.3985 216.652 2.89988 168.345C-15.0581 108.512 73.5029 89.7935 51.5348 38.9013Z";
  // const pathR3 =
  //   "M29.1725 63.2245C72.7068 24.5616 124.941 110.032 168.319 83.5661C190.265 70.1767 163.643 -6.98596 236.413 1.35493C274.641 5.73658 316.123 48.3258 304.892 91.3284C285.018 167.425 415.136 187.492 350.382 258.643C310.916 302.009 285.366 231.488 244.838 231.888C196.418 232.366 204.299 265.368 151.069 283.286C76.859 308.266 19.3068 237.853 5.84653 189.42C-7.01119 143.156 3.36487 86.1444 29.1725 63.2245Z";
  // const pathR4 =
  //   "M123.959 38.4653C153.089 13.9195 196.321 -8.56027 243.534 4.57631C281.053 15.0154 318.278 38.4652 326.89 85.9289C335.413 132.904 326.89 166.216 289.222 192.942C216.153 244.784 172.927 215.296 159.857 295.421C155.233 323.772 130.649 362.536 91.7134 356.288C50.6923 349.705 12.5217 329.165 1.6099 276.448C-13.3266 204.285 80.0485 186.002 97.0007 139.709C117.676 83.2482 95.7435 62.2406 123.959 38.4653Z";

  const pathL1 =
    "M268.417 299.38C241.902 327.291 203.731 344.058 171.437 347.568C146.862 350.24 106.111 337.833 81.4869 311.718C55.406 284.059 51.5425 258.279 56.3397 215.5C64.8287 139.799 -27.2975 115.381 9.49345 42.0191C22.5116 16.0608 72.6819 -14.7133 104.066 9.79352C131.562 31.2651 116.634 92.9072 166.816 113.93C212.63 133.123 263.598 147.93 283.727 193.524C302.956 237.076 291.204 275.392 268.417 299.38Z";
  const pathL2 =
    "M281.504 326.193C304.407 379.249 195.669 366.402 120.296 323.205C53.086 284.685 112.794 251.468 64.635 228.981C39.3362 217.169 -14.2781 188.162 4.62645 162.306C30.4542 126.981 73.9735 155.581 106.379 136.46C136.616 118.618 56.4638 47.5283 118.001 10.7843C188.268 -31.1721 220.252 68.504 228.716 107.801C241.487 167.094 312.401 165.313 325.523 209.035C341.777 263.189 261.622 280.131 281.504 326.193Z";
  const pathL3 =
    "M306.415 202.835C267.234 237.632 220.223 160.708 181.183 184.528C161.432 196.578 185.391 266.025 119.898 258.518C85.4926 254.574 48.1587 216.244 58.2665 177.542C76.1532 109.055 -40.9524 90.9947 17.3257 26.9584C52.8454 -12.0709 75.8408 51.3982 112.315 51.0379C155.893 50.6074 148.801 20.9061 196.708 4.78017C263.497 -17.7019 315.294 45.6695 327.408 89.2589C338.98 130.897 329.641 182.207 306.415 202.835Z";
  const pathL4 =
    "M185.112 286.309C158.94 308.362 120.1 328.559 77.6812 316.756C43.9731 307.378 10.5286 286.309 2.79149 243.666C-4.86589 201.462 2.79149 171.533 36.634 147.521C102.282 100.944 141.118 127.438 152.86 55.4509C157.015 29.979 179.102 -4.84827 214.083 0.765503C250.938 6.68001 285.232 25.1334 295.035 72.4971C308.455 137.33 224.563 153.757 209.333 195.348C190.757 246.075 210.462 264.949 185.112 286.309Z";

  const pathR1 =
    "M25.3533 48.882C51.8677 20.9709 90.0388 4.20421 122.333 0.69335C146.908 -1.97832 187.659 10.4288 212.283 36.5434C238.364 64.2027 242.227 89.983 237.43 132.762C228.941 208.463 321.067 232.881 284.276 306.243C271.258 332.201 221.088 362.975 189.704 338.468C162.207 316.997 177.136 255.355 126.953 234.332C81.1396 215.139 30.1721 200.332 10.0424 154.738C-9.18615 111.186 2.56568 72.87 25.3533 48.882Z";
  const pathR2 =
    "M46.4827 35.1149C23.5806 -17.9409 132.318 -5.09467 207.691 38.103C274.901 76.6221 215.193 109.84 263.352 132.326C288.651 144.139 342.265 173.145 323.361 199.001C297.533 234.327 254.014 205.727 221.608 224.848C191.371 242.69 271.523 313.779 209.986 350.523C139.719 392.48 107.735 292.804 99.2713 253.507C86.5003 194.213 15.5865 195.995 2.46397 152.273C-13.7895 98.1185 66.3657 81.1766 46.4827 35.1149Z";
  const pathR3 =
    "M26.3553 56.6854C65.5361 21.8887 112.547 98.8121 151.587 74.9928C171.338 62.9423 147.379 -6.50406 212.872 1.00274C247.277 4.94622 284.611 43.2765 274.503 81.9788C256.617 150.466 373.722 168.526 315.444 232.562C279.924 271.591 256.929 208.122 220.455 208.483C176.876 208.913 183.969 238.614 136.062 254.74C69.2731 277.222 17.4761 213.851 5.36188 170.262C-6.21007 128.623 3.12839 77.3133 26.3553 56.6854Z";
  const pathR4 =
    "M112.034 34.095C138.205 12.0422 177.046 -8.15445 219.465 3.64795C253.173 13.0268 286.617 34.095 294.354 76.7382C302.012 118.942 294.354 148.871 260.512 172.883C194.864 219.46 156.028 192.967 144.286 264.953C140.131 290.425 118.044 325.253 83.0629 319.639C46.2079 313.724 11.914 295.271 2.11046 247.907C-11.309 183.074 72.5827 166.648 87.8131 125.056C106.389 74.3297 86.6836 55.4557 112.034 34.095Z";

  const { x } = useSpring({
    to: startAnimation
      ? [
          {
            x: 1,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 2, config: { duration: 8000 } },
          {
            x: 3,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 2, config: { duration: 8000 } },
          {
            x: 1,
            config: { duration: Number(position) % 2 === 1 ? 8000 : 6000 },
          },
          { x: 0, config: { duration: 8000 } },
        ]
      : { x: 0 },
    from: { x: 0 },
    loop: startAnimation,
  });

  useEffect(() => {
    setStartAnimation(true);
  }, []);

  return (
    <div className={`${className} absolute`}>
      <svg
        width="500"
        height="500"
        viewBox="0 0 500 500"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style={{
          transform:
            Number(position) % 2 === 1
              ? "translateX(-70px) translateY(-50px)"
              : "translateX(-70px) translateY(-50px)",
        }}
        {...props}
      >
        <animated.path
          fillRule="evenodd"
          clipRule="evenodd"
          opacity="0.24"
          fill="#F4AC45"
          d={x.to({
            range: [0, 1, 2, 3],
            output:
              Number(position) % 2 === 1
                ? [pathL1, pathL2, pathL3, pathL4]
                : [pathR1, pathR2, pathR3, pathR4],
          })}
        />
      </svg>
    </div>
  );
};

export default SpeakerPageBackBlobMob;
